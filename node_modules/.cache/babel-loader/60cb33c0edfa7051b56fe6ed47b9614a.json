{"ast":null,"code":"import _toConsumableArray from\"/Users/matteopolo/reactProjects/brewdog/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/matteopolo/reactProjects/brewdog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useGlobalContext}from'../context';import StarBorderIcon from'@mui/icons-material/StarBorder';import StarIcon from'@mui/icons-material/Star';import{jsx as _jsx}from\"react/jsx-runtime\";var AddFavouritesStar=function AddFavouritesStar(_ref){var el=_ref.el;var _useGlobalContext=useGlobalContext(),favouritesArray=_useGlobalContext.favouritesArray,setFavouritesArray=_useGlobalContext.setFavouritesArray;var _useState=useState(localStorage.getItem(el.name)==='true'?true:false),_useState2=_slicedToArray(_useState,2),favourites=_useState2[0],setFavourites=_useState2[1];var _useState3=useState(/*#__PURE__*/_jsx(StarBorderIcon,{})),_useState4=_slicedToArray(_useState3,2),starIcon=_useState4[0],setStarIcon=_useState4[1];var saveFavourites=function saveFavourites(){//save favourite on localstorage\nlocalStorage.setItem(el.name,!favourites);setFavourites(!favourites);//save favourite on useState\nvar backupArray=_toConsumableArray(favouritesArray);var searchFavourite=backupArray.findIndex(function(item){return item.id===el.id;});if(searchFavourite===-1){backupArray.push({id:el.id,name:el.name,abv:el.abv,isFavourite:!favourites});}else{backupArray[searchFavourite]={id:el.id,name:el.name,abv:el.abv,isFavourite:!favourites};}setFavouritesArray(backupArray);//save favourite as json on localstorage\nlocalStorage.setItem('jsonOnLocalstorage',JSON.stringify(backupArray));};useEffect(function(){if(favourites){setStarIcon(/*#__PURE__*/_jsx(StarIcon,{sx:{fontSize:30}}));}else{setStarIcon(/*#__PURE__*/_jsx(StarBorderIcon,{sx:{fontSize:30}}));}},[favourites]);return/*#__PURE__*/_jsx(\"div\",{className:\"starIcon\",onClick:function onClick(e){e.stopPropagation();saveFavourites();},children:starIcon});};export default AddFavouritesStar;","map":{"version":3,"sources":["/Users/matteopolo/reactProjects/brewdog/src/components/AddFavouritesStar.js"],"names":["useEffect","useState","useGlobalContext","StarBorderIcon","StarIcon","AddFavouritesStar","el","favouritesArray","setFavouritesArray","localStorage","getItem","name","favourites","setFavourites","starIcon","setStarIcon","saveFavourites","setItem","backupArray","searchFavourite","findIndex","item","id","push","abv","isFavourite","JSON","stringify","fontSize","e","stopPropagation"],"mappings":"kQAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,gBAAT,KAAiC,YAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,gCAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,C,2CAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,MAAY,IAATC,CAAAA,EAAS,MAATA,EAAS,CAElC,sBAGIJ,gBAAgB,EAHpB,CACIK,eADJ,mBACIA,eADJ,CAEIC,kBAFJ,mBAEIA,kBAFJ,CAKA,cAAoCP,QAAQ,CAACQ,YAAY,CAACC,OAAb,CAAqBJ,EAAE,CAACK,IAAxB,IAAkC,MAAlC,CAA2C,IAA3C,CAAkD,KAAnD,CAA5C,wCAAOC,UAAP,eAAmBC,aAAnB,eACA,eAAgCZ,QAAQ,cAAC,KAAC,cAAD,IAAD,CAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB;AACAP,YAAY,CAACQ,OAAb,CAAqBX,EAAE,CAACK,IAAxB,CAA8B,CAACC,UAA/B,EACAC,aAAa,CAAC,CAACD,UAAF,CAAb,CACA;AACA,GAAIM,CAAAA,WAAW,oBAAOX,eAAP,CAAf,CACA,GAAMY,CAAAA,eAAe,CAAGD,WAAW,CAACE,SAAZ,CAAsB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,EAAL,GAAYhB,EAAE,CAACgB,EAAnB,EAA1B,CAAxB,CACA,GAAIH,eAAe,GAAK,CAAC,CAAzB,CAA4B,CACxBD,WAAW,CAACK,IAAZ,CAAiB,CAAED,EAAE,CAAEhB,EAAE,CAACgB,EAAT,CAAaX,IAAI,CAAEL,EAAE,CAACK,IAAtB,CAA4Ba,GAAG,CAAElB,EAAE,CAACkB,GAApC,CAAyCC,WAAW,CAAE,CAACb,UAAvD,CAAjB,EACH,CAFD,IAEO,CAAEM,WAAW,CAACC,eAAD,CAAX,CAA+B,CAAEG,EAAE,CAAEhB,EAAE,CAACgB,EAAT,CAAaX,IAAI,CAAEL,EAAE,CAACK,IAAtB,CAA4Ba,GAAG,CAAElB,EAAE,CAACkB,GAApC,CAAyCC,WAAW,CAAE,CAACb,UAAvD,CAA/B,CAAoG,CAC7GJ,kBAAkB,CAACU,WAAD,CAAlB,CACA;AACAT,YAAY,CAACQ,OAAb,CAAqB,oBAArB,CAA2CS,IAAI,CAACC,SAAL,CAAeT,WAAf,CAA3C,EACH,CAbD,CAeAlB,SAAS,CAAC,UAAM,CACZ,GAAIY,UAAJ,CAAgB,CACZG,WAAW,cAAC,KAAC,QAAD,EAAU,EAAE,CAAE,CAAEa,QAAQ,CAAE,EAAZ,CAAd,EAAD,CAAX,CACH,CAFD,IAEO,CACHb,WAAW,cAAC,KAAC,cAAD,EAAgB,EAAE,CAAE,CAAEa,QAAQ,CAAE,EAAZ,CAApB,EAAD,CAAX,CACH,CACJ,CANQ,CAMN,CAAChB,UAAD,CANM,CAAT,CAQA,mBACI,YAAK,SAAS,CAAC,UAAf,CAA0B,OAAO,CAAE,iBAACiB,CAAD,CAAO,CAAEA,CAAC,CAACC,eAAF,GAAqBd,cAAc,GAAI,CAAnF,UAAsFF,QAAtF,EADJ,CAGH,CApCD,CAqCA,cAAeT,CAAAA,iBAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useGlobalContext } from '../context';\nimport StarBorderIcon from '@mui/icons-material/StarBorder';\nimport StarIcon from '@mui/icons-material/Star';\n\nconst AddFavouritesStar = ({ el }) => {\n\n    const {\n        favouritesArray,\n        setFavouritesArray,\n    } = useGlobalContext();\n\n    const [favourites, setFavourites] = useState(localStorage.getItem(el.name) === 'true' ? true : false);\n    const [starIcon, setStarIcon] = useState(<StarBorderIcon />);\n\n    const saveFavourites = () => {\n        //save favourite on localstorage\n        localStorage.setItem(el.name, !favourites);\n        setFavourites(!favourites);\n        //save favourite on useState\n        let backupArray = [...favouritesArray];\n        const searchFavourite = backupArray.findIndex(item => item.id === el.id);\n        if (searchFavourite === -1) {\n            backupArray.push({ id: el.id, name: el.name, abv: el.abv, isFavourite: !favourites });\n        } else { backupArray[searchFavourite] = { id: el.id, name: el.name, abv: el.abv, isFavourite: !favourites } }\n        setFavouritesArray(backupArray);\n        //save favourite as json on localstorage\n        localStorage.setItem('jsonOnLocalstorage', JSON.stringify(backupArray));\n    }\n\n    useEffect(() => {\n        if (favourites) {\n            setStarIcon(<StarIcon sx={{ fontSize: 30 }} />)\n        } else {\n            setStarIcon(<StarBorderIcon sx={{ fontSize: 30 }} />)\n        }\n    }, [favourites])\n\n    return (\n        <div className='starIcon' onClick={(e) => { e.stopPropagation(); saveFavourites() }}>{starIcon}</div>\n    )\n}\nexport default AddFavouritesStar;"]},"metadata":{},"sourceType":"module"}